# <font color='red'> Please visit <a href='Installation.md'>here</a> for latest installation guide </font> #



## Prerequisites ##
  1. WSS 3.0 / MOSS 2007 Environment
> > OR
  1. SharePoint Foundation 2010 / SharePoint 2010 Environment
## Step 1. WSP Installation ##
  1. [Download](http://code.google.com/p/sharepoint-facebook-wall/downloads/list) WSP for 2007 or WSP for 2010 and unzip the Facebook archive. This contains the WSP file, deploy solution batch file and retract solution batch file
### 2007 Installation ###
  1. Change URL property from "<<Server URL>>" to your server URL in both the deploy and retract solution files
  1. Now run deploy solution file <br /> ![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/install-solution.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/install-solution.png)
  1. This will add the solution in solutions gallery <br /> http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/solution-properties.PNG
  1. This will also deploy the feature in site collection features gallery on specified web portal url<br /> http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/write-features-gallery.PNG

### 2010 Installation ###
  1. Right click on  PackageDeploy.ps1 file and click "Run with PowerShell"  <br /> ![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/powershellinstall.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/powershellinstall.png)
  1. Enter your web application URL when prompted <br /> ![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/InputWebURL.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/InputWebURL.png)
  1. IF you have already installed this solution before then you will be given 3 options : <br /> Retract and Install solution<br />Upgrade Solution<br />Exit <br /> ![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/SolutionAlreadyExists.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/SolutionAlreadyExists.png)
  1. In this demo, I opted for 1st option <br /> ![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/Deployment-Success.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/Deployment-Success.png)
  1. This will add the solution in solutions gallery <br /> http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/solution-properties.PNG
  1. This will also deploy the feature in site collection features gallery on specified web portal url<br /> http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/write-features-gallery.PNG

## Step 2. Application registration on facebook ##
  1. Login and [register your application](http://www.facebook.com/developers/createapp.php) on Facebook <br /> ![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/register-application.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/register-application.png)
  1. Note the client id and client secret after registering Facebook application which we will need in next step. Also configure your URL and domain. Please note that the redirect URL in the webpart should be exactly same as configured here <br /> ![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/configure-facebook.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/configure-facebook.png)

## Step 3. Configuration of the Wall webpart ##
  1. Get the Facebook code from https://graph.facebook.com/oauth/authorize?client_id=CLIENTID&redirect_uri=http://www.facebook.com/connect/login_success.html&scope=read_stream,offline_access link. Copy this link and change the CLIENTID as per your configuration and then paste this in your browser URL field and hit go. You will need to allow the application access to read posts from your profile/page<br /> ![https://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/app-permission-access-posts.png](https://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/app-permission-access-posts.png)
  1. Once facebook succesfully process your request then it will redirect you back to the URL provide with the access code. Cut your access code from the URL as shown below<br /> http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/code-success.PNG
  1. Please note the code from previous step.Now you need to add the web part on the page from Web Part gallery <br /> ![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/webpart-pane.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/webpart-pane.png)
  1. Once added, Configure following properties in webpart properties section <br /> ![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/webpart-properties.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/webpart-properties.png)

<font color='red'>If you have used the above URL to get the offline code then Redirect Url should be <a href='http://www.facebook.com/connect/login_success.html'>http://www.facebook.com/connect/login_success.html</a>. It is mandatory that both URLs should match in order to authentication request work. If both are not same then you will get an object referece error.</font>


  1. Once configured you will be able to see the feeds of this User ID/User name/Page id/Group id <br /> ![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/webpart-demo.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/webpart-demo.png)

## Step 4. Configuration of the Write On Wall webpart ##

  1. Get the Facebook offline code from https://graph.facebook.com/oauth/authorize?client_id=CLIENTID&redirect_uri=http://www.facebook.com/connect/login_success.html&scope=publish_stream,offline_access link. Copy this link and change the CLIENTID as per your configuration and then paste this in your browser URL field and hit go. You will need to allow the application for offline access <br /> http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/facebook-confirmation.PNG
  1. Once facebook succesfully process your request then it will redirect you back to the URL provide with the access code. Cut your access code from the URL as shown below<br /> http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/code-success.PNG
  1. Please note the code from previous step. Now you need to add the web part on the page from Web Part gallery <br /> http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/webpart-write-pane.PNG
  1. Once added, Configure following properties in webpart properties section<br /> http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/webpart-write-properties.PNG <br />
<font color='red'>If you have used the above URL to get the offline code then Redirect Url should be <a href='http://www.facebook.com/connect/login_success.html'>http://www.facebook.com/connect/login_success.html</a>. It is mandatory that both URLs should match in order to authentication request work. If both are not same then you will get an object referece error.</font>
  1. 'Where would you like to post' section: The 'Where would you like to post' section lets you specify whether you want to post to your wall or to your page's wall.As we know, we can also make fan pages in facebook and can post updates on the page's wall too.If you want the updates to be posted on your wall, choose the option 'On my wall'.If you want the updates to be posted on your fan page, choose the second option i.e. 'On my page'.
  1. Post location chosen as 'On my wall':If post location is chosen as 'On my wall', the message that you provide in the webpart will be posted to your wall.<br />
  1. 'On my wall' setting:<br />![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/wall-post-on-your-wall-config.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/wall-post-on-your-wall-config.png) <br /><br />
  1. Post location chosen as 'On my page'::If post location is chosen as 'On my page', another section will open up where you are asked to provide the page's facebook id, and the option to specify whether you want to post as current user or as the current page.<br />
  1. The page id to be provided is the id of your facebook page which can be determined by going to your page in facebook and hovering on the page's picture.This screenshot shows the page id for the page named 'Demo Page' that we have created.<br />
  1. Getting the facebook id for the page:<br />![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/get-facebook-page-id.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/get-facebook-page-id.png) <br />
  1. The next set of radio buttons let you choose as to whether you want to post to your fan page as the current user or as the current page.For example, if the user named 'Tsg Brickred' have a fan page named 'Demo Page', then you can post updates on 'Demo Page's' wall as yourself or as 'Tsg Brickred'.
  1. Posting on page as current user:This option will post the update on the fan page as the current user.Therefore, as per our previous example, the message will be posted as 'Tsg Brickred'.
  1. Configuring message to be posted on page as current user:<br />![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/wall-post-on-page-wall-as-this-user-config.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/wall-post-on-page-wall-as-this-user-config.png) <br />
  1. Entering message as current user:<br />![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/wall-post-on-page-wall-as-this-user-entered.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/wall-post-on-page-wall-as-this-user-entered.png) <br />
  1. Result of posting message on page as current user:<br />![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/wall-post-on-page-wall-as-this-user-result.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/wall-post-on-page-wall-as-this-user-result.png) <br />
  1. Posting on page as the current page:This option will post the update on the page as the page itself.
  1. For posting as page , there are 2 prerequisites:<br />The user for which the 'code' was given in the 'code' property of the webpart should be the admin of that page.For example, if 'Tsg Brickred' facebook account was used to get the code from above URL, then 'Tsg Brickred' must be the admin of this page.<br />The application must be given 'Manage Pages' right to your page .For granting these rights, specify the app's CLIENTID in this url and click on it and then click 'Allow'. https://www.facebook.com/dialog/oauth?client_id=CLIENTID&redirect_uri=http://www.facebook.com/connect/login_success.html&scope=manage_pages&response_type=token <br /> For example, if your app's client id is 105434806208476, then the url for granting this permission is : https://www.facebook.com/dialog/oauth?client_id=105434806208476&redirect_uri=http://www.facebook.com/connect/login_success.html&scope=manage_pages&response_type=token.
  1. Granting manage pages permission:<br />![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/app-permission-manage-pages.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/app-permission-manage-pages.png) <br />
  1. Once this is done , we can post as the current page on the page's wall.
  1. Configuring message to be posted on page as current page:<br />![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/wall-post-on-page-wall-as-this-page-config.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/wall-post-on-page-wall-as-this-page-config.png) <br />
  1. Entering message as current page:<br />![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/wall-post-on-page-wall-as-this-page-entered.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/wall-post-on-page-wall-as-this-page-entered.png) <br />
  1. Result of posting message on page as current page:<br />![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/wall-post-on-page-wall-as-this-page-result.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/wall-post-on-page-wall-as-this-page-result.png) <br />
  1. Post location chosen as 'On my group'::If post location is chosen as 'On my group', another section will open up where you are asked to provide the group's facebook id:<br />![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/wall-post-on-group-wall-config.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/wall-post-on-group-wall-config.png)<br />
  1. The group id to be provided is the id of your facebook group which can be determined by going to your group in facebook and hovering on the group's name.This screenshot shows the group id for the page named 'Demo Group' that we have created.<br />
  1. Getting the facebook id for the group:<br />![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/get-facebook-group-id.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/get-facebook-group-id.png) <br />
  1. For posting on group wall, the application must be given 'User Groups' right to your group .For granting these rights, specify the app's CLIENTID in this url and click on it and then click 'Allow'. https://www.facebook.com/dialog/oauth?client_id=CLIENT_ID&redirect_uri=https://www.facebook.com/connect/login_success.html&scope=user_groups&response_type=token <br /> For example, if your app's client id is 105434806208476, then the url for granting this permission is : https://www.facebook.com/dialog/oauth?client_id=105434806208476&redirect_uri=http://www.facebook.com/connect/login_success.html&scope=user_groups&response_type=token.# Granting user groups permission:<br />![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/app-permission-manage-group.jpg](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/app-permission-manage-group.jpg) <br />
  1. Once this is done , we can post on the group's wall.
  1. Entering message:<br />![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/wall-post-on-group-wall-as-this-user-entered.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/wall-post-on-group-wall-as-this-user-entered.png) <br />
  1. Result of posting message on group wall:<br />![http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/wall-post-on-group-wall-as-this-user-result.png](http://sharepoint-facebook-wall.googlecode.com/svn/wiki/images/wall-post-on-group-wall-as-this-user-result.png) <br />